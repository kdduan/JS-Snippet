<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Test Page</title>
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
        const clientId = "842517711072-bd99mv7a76njgr03dn8gnol9qikm19om.apps.googleusercontent.com";
        const clientSecret = "jDCitjD5DZBtkJ-5YWtfOYEe";
        const apiKey = "AIzaSyBxAJ6Kl2eWC-nGFtHOWG2Gw-ImzkaEmhQ";
        
        var ipData;
        var enhanceData;
        $( document ).ready(
            function() {
                $.getJSON('http://ip-api.com/json/?fields=17035263', function(data) {
                    ipData = data;
                })
                .then(
                    function() {
                        console.log("IP DATA: " + JSON.stringify(ipData, null, 2));
                        payload = {
                            "token": "d47c90a467c5465863839dee14650030",
                            "ip": ipData["query"],
                            "size": 1,
                            "threshold": .5
                        };
                        $.getJSON('https://kg.diffbot.com/kg/v3/enhance_endpoint', payload, function(data) {
                            enhanceData = data;
                        })
                        .then(
                            function() {
                                // console.log(JSON.stringify("ENHANCE DATA: " + JSON.stringify(enhanceData, null, 2)));
                                var IP = ipData["query"];
                                var ISP = ipData["isp"];
                                var Proxy = ipData["proxy"];
                                var Hosting = ipData["proxy"];
                                var IP_City = ipData["city"];
                                var IP_Region = ipData["regionName"];
                                var IP_Country = ipData["countryCode"];
                                var IP_LatLong = ipData["lat"] + "," + ipData["lon"];
                                var IP_Postal = ipData["zip"];
                                var IP_Timezone = ipData["timezone"];

                                var body = {
                                    values: [IP, ISP, Proxy, Hosting, IP_City, IP_Region, 
                                            IP_Country, IP_LatLong, IP_Postal, IP_Timezone]
                                };
                            }
                        )
                    }
                ) 
            });
        let currUrl = window.location.href;
        console.log("CURRENT URL: " + currUrl);
    </script>
</head>

<body>
    HELLO
</body>

</html>
